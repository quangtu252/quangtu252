#include<stdio.h>
#include<conio.h>
#include<io.h>
#include<fcntl.h>
#include<string.h>
#include<stdlib.h>
#include<wchar.h>

struct SV {
	wchar_t MSSV[10];
	wchar_t Ten[30];
	wchar_t Khoa[30];
	wint_t khoa;
	wchar_t Ngaysinh[20];
	wchar_t Hinhanh[30];
	wchar_t Motabanthan[1000];
	wchar_t Email[100];
	wchar_t Sothich[100][100];
};
wchar_t* copystring(wchar_t *s, FILE* fp)
{
	int i = 0;
	wchar_t c = fgetwc(fp);
	if (c == '"')
	{
		c = fgetwc(fp);
		while (c != ',' && c != '"')
		{
			s[i] = c;
			c = fgetwc(fp);
			i++;
		}
	}
	else
	{
		while (c != ',' && c != '"')
		{
			s[i] = c;
			c = fgetwc(fp);
			i++;
		}
	}
	s[i] = L'\0';
	return s;
}
void doc_1_sv(FILE* fp, SV& x)
{
	copystring(x.MSSV, fp);
	copystring(x.Ten, fp);
	copystring(x.Khoa, fp);
	wchar_t s[10];
	copystring(s, fp);

	copystring(x.Ngaysinh, fp);
	copystring(x.Hinhanh, fp);
	copystring(x.Motabanthan, fp);
	copystring(x.Email, fp);

}
int dem_sv(FILE* fp)
{
	wchar_t s[1600];
	int dem = 0;
	while (feof(fp) == NULL) {
		fgetws(s, 1600, fp);
		dem++;
	}
	return dem;
}

wint_t WSTRLEN(wchar_t *s)
{
	wint_t dem = 0;
	while (s[dem] != L'\0')
	{
		dem++;
	}
	return dem;
}
wchar_t* ten_file(wchar_t *s1)
{
	wint_t a = WSTRLEN(s1);
	wchar_t *s = new wchar_t[a + 5];
	for (wint_t i = 0; i < a; i++)
	{
		s[i] = s1[i];
	}
	s[a] = L'.';
	s[a + 1] = L'h';
	s[a + 2] = L't';
	s[a + 3] = L'm';
	s[a + 4] = L'l';
	s[a + 5] = L'\0';
	return s;
}
void main()
{


}
